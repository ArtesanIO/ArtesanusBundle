{% extends 'ArtesanusBundle::acl.html.twig' %}

{% block artesanus_section_subtitle %}{{ 'artesanus.subtitles.acl.users'|trans({}, 'ArtesanusBundle') }}{% endblock %}

{% block artesanus_section_plus %}
    {{ knp_menu_render('ArtesanusBundle:ConsoleBuilder:usersNewMenu', {'template': 'ArtesanusBundle:Menu:knp_menu.html.twig'}) }}
{% endblock %}

{% block artesanus_section_body %}

    {% import 'ArtesanusBundle::Components/buttons.html.twig' as btn %}

    {% embed 'ArtesanusBundle::Components/modal.html.twig' with { id: 'myModal', type: 'sm'}%}
        {% block title %}
        {% embed "ArtesanusBundle::Components/form.html.twig" with { 'actions': true, 'enctype': entity_form}%}
            {% block form %}
                {{ form_widget(entity_form) }}
            {% endblock %}
        {% endembed %}
        {% endblock %}
    {% endembed %}

    {% embed "ArtesanusBundle::Components/table.html.twig" with { 'rows': fields }%}
        {% block tbody %}

            {% for entity in entities %}
            <tr>
                {% for field in fields %}
                {% if field is iterable %}
                    <td>{{ attribute(entity, field)|default()|date() }}</td>
                {% else %}
                    <td>{{ attribute(entity, field)|default() }}</td>
                {% endif %}

                {% endfor %}
                <td class="text-right">
                    <div class="btn-group">
                        <a href="{{ path(entityPrefix ~ '_edit', {id: entity.id }) }}" class="btn btn-default">
                            <span class="glyphicon glyphicon-edit"></span>
                        </a>
                        <a href="{{ path(entityPrefix, {id: entity.id }) }}" type="button" class="btn btn-default btn-delete">
                            <span class="glyphicon glyphicon-trash"></span>
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        {% endblock %}
    {% endembed %}
{% endblock %}
